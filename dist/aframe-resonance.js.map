{"version":3,"sources":["webpack:///webpack/bootstrap 87fbaf7ecf0e710f373f","webpack:///./src/index.js"],"names":["ResonanceAudio","AFRAME","RESONANCE_MATERIAL","Object","keys","Utils","ROOM_MATERIAL_COEFFICIENTS","registerComponent","schema","enabled","default","src","type","width","height","depth","helper","oneOf","loop","autoplay","init","el","sceneEl","addEventListener","_camera","querySelector","initResonanceScene","updateProps","update","tick","pos","getAttribute","resonanceAudioScene","setListenerPosition","x","y","z","remove","audioEl","pause","play","paused","audioContext","AudioContext","output","connect","destination","setUpRoom","setUpAudio","updateRoomHelper","updateSourceHelper","roomDimensions","data","roomMaterials","left","right","front","back","down","up","setRoomProperties","audioElement","document","createElement","audioElementSource","createMediaElementSource","source","createSource","input","setPosition","oldHelperEl","_helperEl","classList","add","setAttribute","appendChild","parendNode","removeChild","registerPrimitive","defaultComponents","mappings"],"mappings":"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","file":"aframe-resonance.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 87fbaf7ecf0e710f373f","if (!ResonanceAudio) {\n  throw \"ResonanceAudio has not been loaded!\";\n}\nelse if (!AFRAME) {\n  throw \"AFRAME has not been loaded!\";\n}\n\nconst RESONANCE_MATERIAL = Object.keys(ResonanceAudio.Utils.ROOM_MATERIAL_COEFFICIENTS);\n\nAFRAME.registerComponent('resonance-room', {\n  schema: {\n    enabled: {default: true},\n    src: {type: 'asset' },\n    'src-position': {type: 'vec3', default: '0 0 0' },\n    width: {type: 'number', default: 2 },\n    height: {type: 'number', default: 2},\n    depth: {type: 'number', default: 2 },\n    helper: {type: 'boolean', default: false },\n    'left-wall': {default: 'brick-bare', oneOf: RESONANCE_MATERIAL},\n    'right-wall': {default: 'brick-bare', oneOf: RESONANCE_MATERIAL},\n    'front-wall': {default: 'brick-bare', oneOf: RESONANCE_MATERIAL},\n    'back-wall': {default: 'brick-bare', oneOf: RESONANCE_MATERIAL},\n    'down-wall': {default: 'brick-bare', oneOf: RESONANCE_MATERIAL},\n    'up-wall': {default: 'brick-bare', oneOf: RESONANCE_MATERIAL},\n    loop: {type: 'boolean', default: true },\n    autoplay: {type: 'boolean', default: true }\n  },\n  init() {\n    this.el.sceneEl.addEventListener('loaded', ()=>{\n      this._camera = this.el.sceneEl.querySelector('[camera]');\n    })\n    this.initResonanceScene();\n    this.updateProps();\n  },\n\n  update() {\n    this._camera = this.el.sceneEl.querySelector('[camera]');\n  },\n\n  tick() {\n    // Update listener position (camera)\n    let pos = this._camera.getAttribute('position');\n    this.el.resonanceAudioScene.setListenerPosition(pos.x, pos.y, pos.z);\n  },\n\n  remove() {\n    this.el.audioEl.pause();\n    this.el.audioEl = null;\n  },\n\n  pause() {\n    if (this.el.audioEl) {\n      this.el.audioEl.pause();\n    }\n  },\n\n  play() {\n    if (this.el.audioEl && this.el.audioEl.paused) {\n      this.el.audioEl.play();\n    }\n  },\n\n  // Create singleton context..\n  initResonanceScene() {\n    if (this.el.audioContext) { return; }\n\n    // Create an AudioContext\n    this.el.audioContext = new AudioContext();\n\n    // Create a (first-order Ambisonic) Resonance Audio scene and pass it\n    // the AudioContext.\n    this.el.resonanceAudioScene = new ResonanceAudio(this.el.audioContext);\n    this.el.resonanceAudioScene.output.connect(this.el.audioContext.destination);\n  },\n\n  updateProps() {\n    // Create room\n    this.setUpRoom();\n    this.setUpAudio();\n\n    // Update helpers\n    this.updateRoomHelper();\n    this.updateSourceHelper();\n  },\n\n  // Create resonance room\n  setUpRoom() {\n    let roomDimensions = {\n      width: this.data.width,\n      height: this.data.height,\n      depth: this.data.depth\n    },\n    roomMaterials = {\n      left: this.data['left-wall'],\n      right: this.data['right-wall'],\n      front: this.data['front-wall'],\n      back: this.data['back-wall'],\n      down: this.data['down-wall'],\n      up: this.data['up-wall']\n    };\n    this.el.resonanceAudioScene.setRoomProperties(roomDimensions, roomMaterials);\n  },\n\n  setUpAudio() {\n    if (!this.data.src) {\n      return;\n    }\n\n    // Create an AudioElement.\n    let audioElement = document.createElement('audio');\n\n    // Load an audio file into the AudioElement.\n    audioElement.src = this.data.src;\n\n    // Generate a MediaElementSource from the AudioElement.\n    let audioElementSource = this.el.audioContext.createMediaElementSource(audioElement);\n\n    // Add the MediaElementSource to the scene as an audio input source.\n    let source = this.el.resonanceAudioScene.createSource();\n    audioElementSource.connect(source.input);\n\n    // Set position\n    let pos = this.data['src-position'];\n    source.setPosition(pos.x, pos.y, pos.z);\n\n    // Play the audio.\n    if (this.data.autoplay) {\n      audioElement.play();\n    }\n\n    // Looping\n    audioElement.loop = this.data.loop;\n\n    this.el.audioEl = audioElement;\n  },\n\n  // Update helper box: helper\n  updateRoomHelper() {\n\n    // Fetch existing helper el\n    let oldHelperEl = this.el.querySelector('.resonance-room-helper');\n\n    // Add Box\n    if (this.data.helper && !oldHelperEl)\n    {\n      let _helperEl = document.createElement('a-box');\n      _helperEl.classList.add('resonance-room-helper');\n      // NOTE: GOOGLE RESONANCE DOES NOT HAVE A WAY TO SET THE ROOM POSITION\n      _helperEl.setAttribute('position', {x: 0, y: this.data.height/2, z: 0});\n      _helperEl.setAttribute('width', this.data.width);\n      _helperEl.setAttribute('height', this.data.height);\n      _helperEl.setAttribute('depth', this.data.depth);\n      _helperEl.setAttribute('wireframe', true);\n      _helperEl.setAttribute('color', 'black');\n      this.el.appendChild(_helperEl);\n    }\n    // Remove Helper box\n    else if (!this.data.helper && oldHelperEl)\n    {\n      oldHelperEl.parendNode.removeChild(oldHelperEl);\n      oldHelperEl = null;\n    }\n  },\n\n  // Update helper source: helper\n  updateSourceHelper() {\n\n    // Fetch existing helper el\n    let oldHelperEl = this.el.querySelector('.resonance-source-helper');\n\n    // Add Sphere\n    if (this.data.helper && !oldHelperEl)\n    {\n      let _helperEl = document.createElement('a-sphere');\n      _helperEl.classList.add('resonance-source-helper');\n      _helperEl.setAttribute('radius', 0.2);\n      _helperEl.setAttribute('segments-width', 14);\n      _helperEl.setAttribute('segments-height', 6);\n      _helperEl.setAttribute('wireframe', true);\n      _helperEl.setAttribute('color', 'blue');\n      _helperEl.setAttribute('position', this.data['src-position']);\n      this.el.appendChild(_helperEl);\n    }\n    // Remove Helper box\n    else if (!this.data.helper && oldHelperEl)\n    {\n      oldHelperEl.parendNode.removeChild(oldHelperEl);\n      oldHelperEl = null;\n    }\n  }\n});\n\nAFRAME.registerPrimitive('a-resonance-room', {\n  defaultComponents: {},\n  mappings: {\n    enabled: 'resonance-room.enabled',\n    src: 'resonance-room.src',\n    'src-position': 'resonance-room.src-position',\n    width: 'resonance-room.width',\n    height: 'resonance-room.height',\n    depth: 'resonance-room.depth',\n    helper: 'resonance-room.helper',\n    'left-wall': 'resonance-room.left-wall',\n    'right-wall': 'resonance-room.right-wall',\n    'front-wall': 'resonance-room.front-wall',\n    'back-wall': 'resonance-room.back-wall',\n    'down-wall': 'resonance-room.down-wall',\n    'up-wall': 'resonance-room.up-wall',\n    loop: 'resonance-room.loop',\n    autoplay: 'resonance-room.autoplay',\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}