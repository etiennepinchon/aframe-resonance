!function(e){function t(a){if(o[a])return o[a].exports;var i=o[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var o={};return t.m=e,t.c=o,t.p="/dist/",t(0)}([function(e,t,o){e.exports=o(1)},function(e,t){"use strict";if(!ResonanceAudio)throw"ResonanceAudio has not been loaded!";if(!AFRAME)throw"AFRAME has not been loaded!";var o=Object.keys(ResonanceAudio.Utils.ROOM_MATERIAL_COEFFICIENTS);AFRAME.registerComponent("resonance-room",{schema:{enabled:{default:!0},src:{type:"asset"},"src-position":{type:"vec3",default:"0 0 0"},width:{type:"number",default:2},height:{type:"number",default:2},depth:{type:"number",default:2},helper:{type:"boolean",default:!1},"left-wall":{default:"brick-bare",oneOf:o},"right-wall":{default:"brick-bare",oneOf:o},"front-wall":{default:"brick-bare",oneOf:o},"back-wall":{default:"brick-bare",oneOf:o},"down-wall":{default:"brick-bare",oneOf:o},"up-wall":{default:"brick-bare",oneOf:o},loop:{type:"boolean",default:!0},autoplay:{type:"boolean",default:!0}},init:function(){var e=this;this.el.sceneEl.addEventListener("loaded",function(){e._camera=e.el.sceneEl.querySelector("[camera]")}),this.initResonanceScene(),this.updateProps()},update:function(){this._camera=this.el.sceneEl.querySelector("[camera]")},tick:function(){var e=this._camera.getAttribute("position");this.el.resonanceAudioScene.setListenerPosition(e.x,e.y,e.z)},remove:function(){this.el.audioEl.pause(),this.el.audioEl=null},pause:function(){this.el.audioEl&&this.el.audioEl.pause()},play:function(){this.el.audioEl&&this.el.audioEl.paused&&this.el.audioEl.play()},initResonanceScene:function(){this.el.audioContext||(this.el.audioContext=new AudioContext,this.el.resonanceAudioScene=new ResonanceAudio(this.el.audioContext),this.el.resonanceAudioScene.output.connect(this.el.audioContext.destination))},updateProps:function(){this.setUpRoom(),this.setUpAudio(),this.updateRoomHelper(),this.updateSourceHelper()},setUpRoom:function(){var e={width:this.data.width,height:this.data.height,depth:this.data.depth},t={left:this.data["left-wall"],right:this.data["right-wall"],front:this.data["front-wall"],back:this.data["back-wall"],down:this.data["down-wall"],up:this.data["up-wall"]};this.el.resonanceAudioScene.setRoomProperties(e,t)},setUpAudio:function(){if(this.data.src){var e=document.createElement("audio");e.src=this.data.src;var t=this.el.audioContext.createMediaElementSource(e),o=this.el.resonanceAudioScene.createSource();t.connect(o.input);var a=this.data["src-position"];o.setPosition(a.x,a.y,a.z),this.data.autoplay&&e.play(),e.loop=this.data.loop,this.el.audioEl=e}},updateRoomHelper:function(){var e=this.el.querySelector(".resonance-room-helper");if(this.data.helper&&!e){var t=document.createElement("a-box");t.classList.add("resonance-room-helper"),t.setAttribute("position",{x:0,y:this.data.height/2,z:0}),t.setAttribute("width",this.data.width),t.setAttribute("height",this.data.height),t.setAttribute("depth",this.data.depth),t.setAttribute("wireframe",!0),t.setAttribute("color","black"),this.el.appendChild(t)}else!this.data.helper&&e&&(e.parendNode.removeChild(e),e=null)},updateSourceHelper:function(){var e=this.el.querySelector(".resonance-source-helper");if(this.data.helper&&!e){var t=document.createElement("a-sphere");t.classList.add("resonance-source-helper"),t.setAttribute("radius",.2),t.setAttribute("segments-width",14),t.setAttribute("segments-height",6),t.setAttribute("wireframe",!0),t.setAttribute("color","blue"),t.setAttribute("position",this.data["src-position"]),this.el.appendChild(t)}else!this.data.helper&&e&&(e.parendNode.removeChild(e),e=null)}}),AFRAME.registerPrimitive("a-resonance-room",{defaultComponents:{},mappings:{enabled:"resonance-room.enabled",src:"resonance-room.src","src-position":"resonance-room.src-position",width:"resonance-room.width",height:"resonance-room.height",depth:"resonance-room.depth",helper:"resonance-room.helper","left-wall":"resonance-room.left-wall","right-wall":"resonance-room.right-wall","front-wall":"resonance-room.front-wall","back-wall":"resonance-room.back-wall","down-wall":"resonance-room.down-wall","up-wall":"resonance-room.up-wall",loop:"resonance-room.loop",autoplay:"resonance-room.autoplay"}})}]);
//# sourceMappingURL=aframe-resonance.min.js.map